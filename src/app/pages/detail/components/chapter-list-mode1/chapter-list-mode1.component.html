<div class="detail_section" [attr.hide]="false" (click)="close()">

  <div class="warp">
    <div class="edit" *ngIf="data.is_edit" style="display: flex;justify-content: space-between;margin-left: 8px;align-items: center; height: 36px;">
      <div class="left" style="color: rgba(255, 255, 255, 0.34);font-size: 16px;">
        <span> 已选择 {{selected_length}} 个</span>
      </div>
      <div class="right">
        <mat-checkbox style="margin-right: 24px;"  [(ngModel)]="is_all" (change)="all()">全选</mat-checkbox>
        <button mat-flat-button style="margin-right: 12px;" *ngIf="data.is_download" id="download123" [disabled]="!selected_length" (click)="download()">下载</button>
        <button mat-flat-button style="margin-right: 12px;" [disabled]="!selected_length" (click)=" DropDownMenuOpen()">数据</button>
        <button mat-flat-button (click)="closeEdit()">完成</button>
      </div>

    </div>

    <div class="list" [attr.list_type]="'image'" *ngIf="pattern=='image'" [attr.type]="'list'" (click)="on($event)">
      <button class="item" [id]="n.id" [attr._id]="'chapter_items_' + n.id" [attr.region]="'chapter_items'"
        [attr.multiple]="n.selected" [attr.content_menu_key]="'chapter_items'" [attr.content_menu_value]="n.id"
        [matTooltipShowDelay]="5000" [matTooltip]="n.title" mat-button *ngFor="let n of data.chapters;let index=index"
        [attr.index]="index" [attr.current]="data.chapter_id==n.id" [attr.read]="!!n.read">
        <div class="box">
          <div class="img">
            <app-image [objectFit]="'cover'" class="image" loading="lazy" [src]="n.cover" />
            <div class="lock" *ngIf="is_locked">
              <mat-icon class="lock_icon" *ngIf="n.is_locked">lock</mat-icon>
              <mat-icon class="lock_icon" *ngIf="!n.is_locked">lock_open</mat-icon>
            </div>
          </div>
          <div class="info">
            <div class="name" [attr.svg_filter]="'text_primary'">
              {{ n.title }}
            </div>
            <div class="buttom">
              <div class="sub_title" *ngIf="n.pub_time" [attr.svg_filter]="'text_secondary'">
                {{n.pub_time | date:'YYYY-MM-dd'}}
              </div>
            </div>
          </div>
        </div>
        <mat-checkbox class="checkbox" [color]="'primary'" *ngIf="data.is_edit" [(ngModel)]="n.selected"></mat-checkbox>
      </button>
    </div>
    <div *ngIf="pattern=='index'" class="abbreviated" [attr.list_type]="'index'" [attr.type]="'list'" (click)="on($event)">
      <button class="item" [id]="n.id" [attr._id]="'chapter_items_' + n.id" [attr.region]="'chapter_items'"
        [attr.multiple]="n.selected" [attr.content_menu_key]="'chapter_items'" [attr.content_menu_value]="n.id"
        [matTooltipShowDelay]="5000" [matTooltip]="n.title" mat-button *ngFor="let n of data.chapters;let index=index"
        [attr.index]="index" [attr.current]="data.chapter_id==n.id" [attr.read]="!!n.read">
        <span [attr.read]="!!n.read" [attr.current]="data.chapter_id==n.id">
          {{ index + 1 }}
        </span>
      </button>


    </div>
    <div *ngIf="pattern=='title'" class="list" [attr.list_type]="'title'" [attr.type]="'list'" (click)="on($event)">
      <button class="item" [id]="n.id" [attr._id]="'chapter_items_' + n.id" [attr.region]="'chapter_items'"
        [attr.multiple]="n.selected" [attr.content_menu_key]="'chapter_items'" [attr.content_menu_value]="n.id"
        [matTooltipShowDelay]="5000" [matTooltip]="n.title" mat-button *ngFor="let n of data.chapters;let index=index"
        [attr.index]="index" [attr.current]="data.chapter_id==n.id" [attr.read]="!!n.read">
        <span [attr.read]="!!n.read" [attr.current]="data.chapter_id==n.id">
          {{ n.title }}
        </span>
      </button>


    </div>
</div>

